# Дизайн документ "Название"

|Платформа|Веб|
|---|---|
|Жанр|Стратегия|
|Аудитория|12+|

## Обзор концепции

"Название" - это игра в жанре стратегия, действие которой разворачивается в средневековом фэнтези городе. Это веселая игра и непростая стратегия в одном флаконе. Используйте различные заклинания, мешайте экономике города и наблюдайте за 
тем как город экономически восстанавливается, узнавайте стратегии восстановления города и будьте на шаг впереди для достижения победы. Вы волшебник, в прошлом спасавший город от разных бед, но сейчас город отвернулся от вашей магии ради
экономики и науки, дайте им знать что вы об этом думаете или проиграйте доказав величие науки.

### Основные фишки
* Заклинания
  
  Вы обладаете целым список заклинаний, включающий огненный шар, вызов проливных дождей, падение метеорита, вы даже можете наслать лень на жителей города. Вы можете прямо воздействовать на экономику города уничтожив порт или косвенно, заставляя
  жителей сидеть по домам. Но правильно рассчитайте использование заклинаний, иначе жители восстановят все повреждения и дадут вам отпор.
* Экономика города

  Город обладает ресурсами, которые добывают и производят жители в обмен на золото, которое в свою очередь тратится на произведенную еду. Если в городе чего то не хватает, или наоборот есть избыток, то город пользуется портом и таможней для закупки или экспорта товаров. Со всех денежных операций в казну города поступают налоги, а с импорта товаров платится пошлина.
* Восстановление города

  Жители города обязательно будут препятствовать вашим попыткам разрушить экономику города. Для этого у них предусмотрены несколько путей выхода из кризисных ситуаций.
    1. Повышение покупательной способности населения (Город повышает зарплаты)
    2. Организация новых рабочих мест (Увеличивает кол-во рабочих мест в здании, в чьей сфере недостает производства/добычи)
    3. Регулирование экономики через налоговую систему (Увеличивает или уменьшает налоги и пошлины)
    4. Повышение расходов города на социальную сферу (Возможно внедрение работы вида восстановление города, зарплаты у них можно увеличить, что увеличит настроение и из этого улучшится качество работы).

### Визуальная привлекательность
Игра становится визуально привлекательной благодаря нескольким элементам:
1.  Пиксель арт
2.  Анимированные элементы окружения
3.  Визуальные эффекты заклинаний

#### Привлекательность героя (Если мы представим героя)
1. Комичный вид
2. Постоянное путание в цифрах и математике (если говорить о диалоговых окнах с текстом)

#### Визуальные эффекты
Будучи стратегией в сеттинге фэнтези игра наполнена визуальными эффектами. Каждое из четырех заклинаний, которые появятся в демо-версии, обладают своим набором визуальных эффектов, включающих огонь с искрами, тряску камеры, затемнение экрана
и переливающуюся цветовую ауру.

#### Визуальное разнообразие
Действие игры разворачивается в городе окруженном четыремя разными локациями, каждая из которых предлагает свои визуальные достопримечательности. Леса на севере, горы на востоке, степь на западе и океан на юге, а в центре стоит город с разнообразными зданиями
и бегающими между ними жителями.

## Структура игры
### Руководство и тренировка
Когда игроку нужно впервые использовать определенную функцию пользовательского интерфейса игровой функции, он получает информационное сообщение, описывающее как использовать соответствующую функцию.
Когда игрок наводится курсором на определенную функцию пользовательского интерфейса игровой функции, над курсором всплывает информационное сообщение, описывающее на что именно смотрит игрок.

### Специальные возможности
В игре есть возможность следить за экономическими показателями города, и за тем, как они менялись со временем в виде графиков и числовых представлений.

### Дизайн уровня
Уровень представляет собой 5 локаций представленных на одном экране. Четыре из них располагаются по краям экрана, в центре стоит пятая локация "Город". Каждая из локаций по краям логически и визуально связана со своим отдельным зданием.
В центре находятся все остальные здания, соединенные дорогами.

### Привлекательность реиграбельности
Предполагаемое время завершения сессии 30 минут. Благодаря представленным заклинаниям и системе экономики города, игрок может попробовать победить выбрав отличную от предыдущих игр стратегию влияния на экономику города.

### Система сохранений
Игровой процесс автоматически сохраняется каждый игровой день.
Статистика прохождения сохраняется отдельным файлом чтобы игрок мог отдельно посмотреть как происходит изменение города в зависимости от его текущих проблем. Файл открывается внутри самой игры.

## Динамика игры
### ИИ
В игре представлены такие сущности как жители и сам город. Искусственный интеллект служит для того, чтобы сделать поведения этих сущностей убедительным. Также ИИ служит для распределения ресурсов внутри экономики города в зависимости от экономической ситуации и определения поведения жителей для восполнения своих потребностей. 

### Взаимодействие с окружающей средой
Сам мир статичен, интерактивность создается путем использования заклинаний. В каждой локации есть объекты, при частом нажатии на которые будет проигрываться их анимация.

### Управление
Все управление игрой может выполняться курсором мыши, но также доступны горячие клавиши для быстрого доступа к игровым функциям.
|Клавиша|Функция|
|---|---|
|ESC|Открытие/Закрытие меню паузы|
|TAB|Открытие/Закрытие списка заклинаний|
|E|Открытие/Закрытие информации об экономике город|
|Q|Открытие/Закрытие книги с описаниями выходов из кризиса|

### Интерфейс HUD
В игре есть набор групп графических интерфейсов:
* Меню - набор окон и переключение между ними, которое поприветствует игрока сразу после включения игры.
* Игра - включает в себя такие элементы как графические представления информации (кол-во зарядов магии, ресурсы города, этап дня), набор окон (пауза, список заклинаний, информация об экономике).

## Сетевые функции
После окончания игры дается возможность посмотреть экономику городов других игроков.

## Технический дизайн
### Инструменты и технологии
Для разработки игры используется движок Godot 3.5 с дополнительным шаблоном экспорта под WebGL. Godot позволяет легко тестировать браузерные игры, и имеет простой функционал.

### Инструменты для создания контента
Художники используют Aseprite для создания визуального контента в стиле пиксель арт.
Саунд-дизайнер записывает музыку вживую, а для создания звуков используется FL Studio.

### Локализация
В демонстрационной версии игры используется только русский язык.

## Игровой процесс
### Время
#### Этапы дня
Время в игре представлено двумя этапами дня:
* Работа
* Отдых

Чтобы жизнь в городе казалось более живой, одна половина жителей будет работать в первый этап дня, а отдыхать во второй, другая половина ровно наоборот. Тогда будет представлена жизнь в городе и при этом город будет работать постоянно, весь день.
Каждый этап дня проходит за 15 секунд.
Когда этап отдыха переходит в переходит в этап работы пропускается фаза ночи, её в игре нет, просто считается что начался новый день.

#### Заряды заклинаний
На использование заклинаний тратятся заряды, заряды копятся со временем.

Каждый этап дня игрок получает 1 заряд заклинаний, максимум их 5.

### Жизнь города
Город представляет собой набор зданий и жителей. И то что определяет победил ли игрок или нет это армия города.

#### Успех города
Город достигнет успеха и игрок проиграет если у города будет много золота.

#### Жители
Каждый житель имеет следующие показатели:
|Название|Представление|Изменение каждый этап|Описание|
|---|---|---|---|
|Усталость|Числовое|Каждый этап дня персонаж теряет по 1/5 усталости|Усталость можно восстанавливать только если за жителем закреплено жильё|
|Голод|Числовое|Каждый этап дня персонаж теряет по 1/5 голода|Голод восстанавливается только в лавках, при наличии продукции|
|Настроение|Числовое|(Усталость+Голод+Деньги)/3|Настроение влияет на эффективность рабочих зданий, а также частоту случайного импорта в город|
|Работа|указатель на здание|Если здание работы было уничтожено тогда за работу жители не получают деньги, а восстанавливают часть здания с небольшой фиксированной платой.|Указание где работает житель, туда он пойдет в рабочий этап дня и зайдя на работу здание получит +1 к работникам, что повлияет на продуктивность|
|Жилье|Указатель на здание|Каждый этап отбирает деньги у жителя, если здание уничтожено то в этап отдыха жители восстанавливают часть жилья и не восстанавливают усталость|Указывает где житель восстанавливает усталость на этапе отдыха|
|Деньги|числовое|Зарабатываются на этапе работы, а тратятся на этапе отдыха|Отображение количества золотых монет в кармане жителя|

##### Жизненный цикл жителя
На этапе работы житель уходит на свою работу, и если здание целое то заходит в него и начинает процесс работы, в конце этапа работы житель тратит голод, усталость, но получает полноценную зарплату. 
Если здание выведено из строя в таком случае житель гуляет возле здания, в конце рабочего этапа восстанавливается часть разрушенного здания, житель тратит усталость, голод, город тратит ресурсы на восстановление здания, но житель получает фиксированную небольшую плату.
На этапе отдыха житель начинает восполнять потребности, когда ему нужно есть, он выбирает целый магазин в котором склад не пустой и идет туда. Он заходит в магазин а через 5 1-5 секунд выходит, сразу восстанавливает голод, после чего он 1-5 секунд гуляет и возвращается домой. Когда он заходит в дом, он исчезает с карты, в конце этапа отдыха если он был в доме то он восстанавливает усталость.
Лучше понять жизненный цикл поможет блок-схема.

#### Здания
Есть два вида зданий:
* Жильё
* Рабочее

|Название|Сколько всего таких зданий|Жителей на одно здание|Всего жителей|Описание|
|---|---|---|---|---|
|Жильё|20|4|80|Дома нужные для отдыха людей|
|Добыча|2|10|20|Лес и шахта, добывающие ресурсы для города|
|Производство|5|4|20|Мастерские, кузницы, у них может быть любое представление. Они производят материалы, нужные для всех аспектов жизни города|
|Лавка|10|2|20|Мясницкие, рыбные, овощные, у них может быть любое представлнеие. Они производят еду, нужную для восстановления голода жителей на их этапе отдыха|
|Таможня|2|10|20|Это порт и таможня. Они нужны для закупки недостающих ресурсов (включая материалы и еду) города, для экспорта лишних ресурсов и дают шанс в зависимости от настроения по городу внести свои ресурсы заплатив пошлину|

#### Ресурсы
Ресурсы представленные в игре являются обобщение того, что нужно человеку в повседневной жизни.
* МР - максимум ресурсов
* ТР - текущие ресурсы
* ЦР - цена единицы ресурса
* ММ - максимум материалов
* ТМ - текущие материалы
* НМ - наценка для материала
* МЗР - материалов за единицу ресурса
* МЕ - максимум еды
* ТЕ - текущая еда
* ЕЗР - еды за единицу ресурса
* НЕ - наценка еды
* КЖ - Количество жителей
* НКЕ - Нужное кол-во еды на человека в день
* ЗС - Загатовки на склад в процентах %
* МНПЗ - материалы на поддержку зданий, нужно для обозначения сколько ресурсов нужно городу
* КЗ - Кол-во зданий
* ТРД - трата ресурса в день, каждое производство и лавка тратят ресурсы.

Цена меняется из-за малого или наоборот большого кол-ва ресурсов/материалов/еды на складах. Помимо этого существует наценка для материалов и еды, которая позволяет вручную подгонять цены. 

|Название|Ценность, формула|Описание|
|---|---|---|
|Ресурс|(2 * МР-ТР)/ТР|Это все что добывается и можно или нельзя съесть|
|Материал|(2 * ЦР * ММ * НМ - ТМ * ЦР  * НМ)/(МЗР * ММ)|Это все что делается из несъедобных ресурсов, например строительные материалы|
|Еда|(2 * ЦР * МЕ  * НЕ - ТЕ * ЦР * НЕ)/(ЕЗР * МЕ)|Это все что делается из съедобных ресурсов|

##### Сколько городу нужно ресурсов

|Название|Формула|Описание|
|---|---|---|
|Еда|КЖ * НКЕ * ЗС|Количество еды, производимое в день + ЗС которые отправятся на склад. То есть нужно 100, будет сделано 150 чтобы 50 отправились на склад.|
|Материалы|КЗ * МПНЗ * ЗС|Количество материалов нужных на поддержку жизнеспособности зданий + ЗС которые отправятся на склад|
|Ресурсы|ТРД * ЗС|Количество материалов нужных на поддержку жизнеспособности зданий|

##### Сколько город производит
Производственные здания
|Название|Кол-во человек в здании|Производят в этап на человека|Трата ресурсов в этап на человека|Зарплата на человека|Настроение в здании|
|---|---|---|---|---|---|
|Лавка|||||

|Название|Кол-во человек в здании|Добывают в этап на человека|Зарплата на человека|Настроение в здании|
|---|---|---|---|---|

#### Таможня и порт
Когда город производит больше нужного или наоборот ему недостает ресурсов или материалов с едой, город начинает закупать или экспортировать товары с помощью таможни или порта.
В зависимости от настроения и процента целых зданий в городе есть шанс импорта бесплатных ресурсов и пополнения казны за счет пошлин.

### Игрок
Игрок берет под контроль злого волшебника, готового разрушить город только из-за использования экономики.

Игровой процесс игрока начинается с наблюдения за городом и использования заклинания. Дальнейший процесс состоит в углублении созданного кризиса. Не беда если город полностью восстановился, у игрока всегда есть возможность подождать заряда заклинания и снова начать свои злодения.

Игрок победит если город не добьется успеха за 30 минут, либо если порушит все дома в городе.

#### Система вознаграждения
Полностью уничтожив одно здание, в интерфейсе игрока закрашивается одно поле из трех. Когда игрок разрушит три здания, он получит 1 опыт. Каждую единицу опыта можно потратить на прокачку заклинаний, например за прокачку заклинания на +1 понадобится 1 опыт, на +2 2 опыта, и на 3 соответственно 3 опыта. 

#### Игровой цикл
Игрок наблюдает за городом и если армия ещё не собралась то имеет возможность использовать заклинания пока есть доступные заряды. А если опыта хватает 
То есть игрок:
1. Наблюдает за городом
2. Выбирает заклинание
3. Использует его по возможности и желанию
4. Получает опыт и, если хочет, прокачивает заклинания

